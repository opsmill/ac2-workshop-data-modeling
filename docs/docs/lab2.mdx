---
title: Lab 2
---

## Lab 2 - Graph Database

We're going to explore using a graph database (**Neo4j**) to show the differences between a traditional relational database and a graph database.

For this lab, we'll require Docker to spin up an instance of a Neo4j database.

## Lab Commands

We provide a few commands to be able to easily manage the lab using Invoke.

```shell
â¯ invoke -l
Available tasks:

  lab2-destroy   Destroy Lab2.
  lab2-load      Load devices into Lab2.
  lab2-start     Start Lab2.
```

:::info
Omitted non-lab2 related Invoke tasks.
:::

## 1. Starting and exploring the API

Let's start by starting the API using Invoke.

```shell
â¯ invoke lab2-start
 Network ac2-workshop-data-modeling_default  Creating
 Network ac2-workshop-data-modeling_default  Created
 Volume "ac2-workshop-data-modeling_database_logs"  Creating
 Volume "ac2-workshop-data-modeling_database_logs"  Created
 Volume "ac2-workshop-data-modeling_database_data"  Creating
 Volume "ac2-workshop-data-modeling_database_data"  Created
 Container ac2-workshop-data-modeling-database-1  Creating
 Container ac2-workshop-data-modeling-database-1  Created
 Container ac2-workshop-data-modeling-database-1  Starting
 Container ac2-workshop-data-modeling-database-1  Started
INFO     Using path workshop_b2/lab2/main.py                                    
INFO     Resolved absolute path                                                 
         /Users/Mikhail/cloned/ac2-workshop-data-modeling/workshop_b2/lab2/main.
         py                                                                     
INFO     Searching for package file structure from directories with __init__.py 
         files                                                                  
INFO     Importing from /Users/Mikhail/cloned/ac2-workshop-data-modeling        
                                                                                
 â•­â”€ Python package file structure â”€â•®                                            
 â”‚                                 â”‚                                            
 â”‚  ğŸ“ workshop_b2                 â”‚                                            
 â”‚  â”œâ”€â”€ ğŸ __init__.py             â”‚                                            
 â”‚  â””â”€â”€ ğŸ“ lab2                    â”‚                                            
 â”‚      â”œâ”€â”€ ğŸ __init__.py         â”‚                                            
 â”‚      â””â”€â”€ ğŸ main.py             â”‚                                            
 â”‚                                 â”‚                                            
 â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯                                            
                                                                                
INFO     Importing module workshop_b2.lab2.main                                 
INFO     Found importable FastAPI app                                           
                                                                                
 â•­â”€â”€â”€â”€â”€â”€â”€â”€ Importable FastAPI app â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®                                    
 â”‚                                         â”‚                                    
 â”‚  from workshop_b2.lab2.main import app  â”‚                                    
 â”‚                                         â”‚                                    
 â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯                                    
                                                                                
INFO     Using import string workshop_b2.lab2.main:app                          
                                                                                
 â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ FastAPI CLI - Production mode â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®                        
 â”‚                                                     â”‚                        
 â”‚  Serving at: http://0.0.0.0:8001                    â”‚                        
 â”‚                                                     â”‚                        
 â”‚  API docs: http://0.0.0.0:8001/docs                 â”‚                        
 â”‚                                                     â”‚                        
 â”‚  Running in production mode, for development use:   â”‚                        
 â”‚                                                     â”‚                        
 â”‚  fastapi dev                                        â”‚                        
 â”‚                                                     â”‚                        
 â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯                        
                                                                                
INFO:     Will watch for changes in these directories: ['/Users/Mikhail/cloned/ac2-workshop-data-modeling']
INFO:     Uvicorn running on http://0.0.0.0:8001 (Press CTRL+C to quit)
INFO:     Started reloader process [63280] using WatchFiles
INFO:     Started server process [63284]
INFO:     Waiting for application startup.
Unable to retrieve routing information
INFO:     Application startup complete.
```

Let's start by quickly navigating to the [API](http://localhost:8001/docs) once you see **Application startup complete**.

We can see we have multiple endpoints to manage creating and reading `devices`, `sites`, `countries`, and `tags`.

![api-docs](./images/lab2/01-api-docs.png)

We can also navigate to the [Neo4j UI](http://localhost:7474), we can look at the database.

Click on the **database** icon in the top left.

![neo4j-menu](./images/lab2/02-neo4j-menu.png)

We can now see that we have node labels that correlate to each API endpoint.

![neo4j-node-labels](./images/lab2/03-neo4j-node-labels.png)

If you click on any of the labels that match our API endpoints, it should return no records at this time.

![neo4j-empty-tags](./images/lab2/04-neo4j-empty-node-labels.png)
